(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72de4d44"],{"43e3":function(e,t,a){"use strict";var r=a("bf1e"),n=a.n(r);n.a},5651:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("b-breadcrumb",{attrs:{items:e.items}})},n=[],s={props:["id","items"],data:function(){return{}}},o=s,l=(a("43e3"),a("2877")),i=Object(l["a"])(o,r,n,!1,null,null,null);t["a"]=i.exports},"6fa1":function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("footer",{staticClass:"sticky-footer"},[a("div",{staticClass:"container"},[a("div",{staticClass:"text-center"},[a("small",[e._v("Copyright Â© Marpe Online Procument "+e._s(e.data))])])])])])},n=[],s={name:"referral",data:function(){return{data:(new Date).toDateString()}}},o=s,l=a("2877"),i=Object(l["a"])(o,r,n,!1,null,null,null);t["a"]=i.exports},bf1e:function(e,t,a){},f306:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("b-container",{attrs:{fluid:""}},[a("Breadcrumb",{attrs:{items:e.items,id:e.user.slug}}),a("b-row",[a("b-col",{staticClass:"mb-4"},[e.log.msgError?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[e._v(e._s(e.log.message))]):e._e(),e.log.msgSuccess?a("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[e._v(e._s(e.log.message))]):e._e()])],1),a("b-row",[a("b-col",[a("b-card",{staticClass:"overflow-hidden mb-3 p-3",attrs:{title:"Only purchase order"}},[a("h6",{staticClass:"muted mb-3"},[e._v("By placing this order,you acknowledge that you have read our Only "),a("a",{staticStyle:{color:"#ea5376 !important"},attrs:{href:"#"}},[e._v("Purchase Guidelines")])]),a("b-form",{on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"2",label:"Seller Name","label-for":"seller"}},[a("b-form-input",{attrs:{name:"seller",type:"text",placeholder:"Enter the seller name",required:""},model:{value:e.data.sellername,callback:function(t){e.$set(e.data,"sellername",t)},expression:"data.sellername"}})],1),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"2",label:"Amount To Pay","label-for":"amount"}},[a("b-form-input",{ref:"amount",attrs:{name:"amount",type:"text",placeholder:"Enter the Amount you want To Pay",required:""},model:{value:e.data.amount,callback:function(t){e.$set(e.data,"amount",t)},expression:"data.amount"}})],1),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"2",label:"Seller Phone Number","label-for":"phone"}},[a("b-form-input",{attrs:{name:"phone",type:"text",placeholder:"Enter seller phone number",required:""},model:{value:e.data.sellerphone,callback:function(t){e.$set(e.data,"sellerphone",t)},expression:"data.sellerphone"}})],1),e.log.loading?a("b-button",{attrs:{disabled:"",variant:"primary"}},[a("b-spinner",{attrs:{small:""}}),e._v(" Please Wait")],1):a("b-button",{attrs:{type:"submit",variant:"primary"}},[a("b-icon",{attrs:{icon:"envelope"}}),e._v(" Make Payment")],1)],1)],1)],1)],1),a("hr",{staticClass:"my-5"}),e.onlypurchase.length>0?a("b-row",[a("b-col",[a("b-card",{staticClass:"overflow-hidden mb-3 p-3",attrs:{title:"Waiting for paymentment"}},[a("mdb-tbl",{attrs:{btn:"",responsive:"",striped:""}},[a("mdb-tbl-head",[a("tr",[a("th",[e._v("#")]),a("th",[e._v("Seller Name")]),a("th",[e._v("Seller Phone")]),a("th",[e._v("Amount to Pay")]),a("th",[e._v("Fee")]),a("th",[e._v("Total Paid")])])]),a("mdb-tbl-body",e._l(e.onlypurchase,(function(t,r){return a("tr",{key:r},[a("th",{attrs:{scope:"row"}},[e._v(e._s(r))]),a("td",[e._v(e._s(t.sellername))]),a("td",[e._v(e._s(t.sellerphone))]),a("td",[e._v(e._s(e._f("toCurrency")(t.amount)))]),a("td",[e._v(e._s(e.fee))]),a("td",[e._v(e._s(e._f("toCurrency")(t.total)))])])})),0)],1)],1)],1)],1):a("b-row",[a("b-col",[a("b-card",{staticClass:"p-3",attrs:{"no-body":""}},[a("p",[e._v("you have nothing to purchase")])])],1)],1)],1),a("b-modal",{ref:"comfirmModal",staticStyle:{padding:"0"},attrs:{id:"comfirmModal",title:"Comfirm Payment",size:"md"},scopedSlots:e._u([{key:"modal-footer",fn:function(t){var r=t.ok;return[a("b-button",{attrs:{variant:"primary"},on:{click:function(t){r(e.makePayment())}}},[e._v("\n        Comfirm\n      ")])]}}])},[a("mdb-tbl",{attrs:{btn:"",responsive:"",striped:""}},[a("mdb-tbl-head",[a("tr",[a("th",[e._v("#")]),a("th",[e._v("Amount to Pay")]),a("th",[e._v("Fee")]),a("th",[e._v("Total")])])]),a("mdb-tbl-body",[a("tr",[a("th",{attrs:{scope:"row"}},[e._v("1")]),a("td",[e._v(e._s(e._f("toCurrency")(e.data.amount)))]),a("td",[e._v(e._s(e.fee)+"%")]),a("td",[e._v(e._s(e._f("toCurrency")(e.percentage(e.data.amount,this.fee))))])])])],1)],1),a("b-modal",{ref:"paymentModal",staticStyle:{padding:"0"},attrs:{id:"modal-prevent-closing","hide-header":"","hide-footer":"","no-stacking":"","ok-disabled":"",size:"md"}},[a("object",{staticStyle:{width:"100%",height:"500px"},attrs:{type:"text/html",data:e.authorization_url}})])],1)},n=[],s=(a("8e6e"),a("ac6a"),a("456d"),a("bd86")),o=a("91c9"),l=a("5651"),i=a("6fa1"),c=a("2f62");function u(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?u(Object(a),!0).forEach((function(t){Object(s["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):u(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={name:"onlypurchesed",props:["id"],components:{mdbTbl:o["mdbTbl"],mdbTblHead:o["mdbTblHead"],mdbTblBody:o["mdbTblBody"],Breadcrumb:l["a"],Footer:i["a"]},data:function(){return{fee:null,authorization_url:null,reference:null,checkTransaction:null,currency:"",data:{useremail:"",sellername:null,amount:null,sellerphone:"",total:null},mainProps:{center:!0,fluidGrow:!0,blank:!0,blankColor:"#eee",width:600,height:400,class:""},items:[{text:"Dashboard",href:"/user/"+this.id+"/"},{text:"Domestic Order",href:"domestic"},{text:"Only Purchase Order",href:"onlypurchesed",active:!0},{text:"Only Shipping Order",href:"onlyshipping"},{text:"Purchase And Shipping",href:"purchaseshipping"}]}},created:function(){var e=this;this.$store.watch((function(t){return console.log(t),e.$store.state.transaction}),(function(t,a){console.log(a),"success"===t?(e.stopTransactionCheck(),!0===e.$store.state.log.isUserActive?e.updateUserData():e.loginNewUser(),e.makeToast("success","Transaction was success",!0),e.$refs["paymentModal"].hide()):"failed"===t?(e.stopTransactionCheck(),e.makeToast("danger","Transaction Failed, Please try again",!0),e.$refs["paymentModal"].hide(),setTimeout((function(){location.reload()}),3e3)):"Insufficient Funds"===t?(e.stopTransactionCheck(),e.makeToast("warning","Insufficient Funds, Please try again",!0),e.$refs["paymentModal"].hide(),setTimeout((function(){location.reload()}),3e3)):"warning"===t&&(console.log("reponse recieved"),e.makeToast("warning",e.log.message,!0))})),"NGN"!=this.currencyType.currency&&"USD"!=this.currencyType.currency||(this.currency=this.currencyType.currency),this.fee=this.settings.commission.procurementfee,this.data.useremail=this.user.email},computed:d(d({},Object(c["d"])(["settings","log","user","onlypurchase","currencyType"])),Object(c["c"])(["totalOnlypurchased","onlyPlacedOrder"])),methods:{onSubmit:function(){this.$refs["comfirmModal"].show()},makePayment:function(){var e=this,t={email:this.data.useremail},a={total:this.percentage(this.$refs.amount.value,this.fee),user:t,currency:this.currency};this.$store.dispatch("initTransaction",a).then((function(t){e.authorization_url=t.data.authorization_url,e.reference=t.data.reference})).catch((function(t){return e.$store.commit("logServerErr",t.response.data.message)})).then((function(){return e.$refs["paymentModal"].show()})).then((function(){var t={reference:e.reference};e.checkTransaction=setInterval((function(){e.$store.dispatch("verifyPayment",t).then((function(t){"status"===t.data.status?(console.log("success"),e.stopTransactionCheck()):console.log("not verifed!")}))}),5e3)})).catch((function(t){return e.$store.commit("logServerErr",t.response.data.message)}))},updateUserData:function(){var e=this;this.data.total=this.percentage(this.$refs.amount.value,this.fee);var t=localStorage.getItem("accessToken"),a=this.data,r={token:t,data:a};this.$store.dispatch("addOnlyPurchase",r).then((function(t){e.$store.commit("SET_NEW_ONLY_PURCHASE",t),e.$store.commit("SAVED","added successfully")})).catch((function(t){return e.$store.commit("logServerErr",t.response.data.message)}))},stopTransactionCheck:function(){clearInterval(this.checkTransaction)},percentage:function(e,t){var a=e/100*t;return parseInt(a)+parseInt(e)},makeToast:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.toastCount++,this.$bvToast.toast("".concat(t),{title:"Transaction Status",variant:e,solid:!0,autoHideDelay:5e3,appendToast:a})}}},h=m,p=a("2877"),f=Object(p["a"])(h,r,n,!1,null,null,null);t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-72de4d44.146719e0.js.map