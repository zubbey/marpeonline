(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-db4fb8a0"],{"03d0":function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-container",{attrs:{fluid:""}},[a("Breadcrumb",{attrs:{items:t.items,id:t.user.slug}}),a("b-row",[a("b-col",{staticClass:"mb-4"},[t.log.msgError?a("div",{staticClass:"alert alert-danger",attrs:{role:"alert"}},[t._v(t._s(t.log.message))]):t._e(),t.log.msgSuccess?a("div",{staticClass:"alert alert-success",attrs:{role:"alert"}},[t._v(t._s(t.log.message))]):t._e()])],1),a("b-row",[a("b-col",[a("b-card",{staticClass:"overflow-hidden mb-3 p-3",attrs:{title:"Purchase and Shipping"}},[a("h6",{staticClass:"muted mb-3"},[t._v("\n            By placing this order,you acknowledge that you have read our Only\n            "),a("a",{staticStyle:{color:"#ea5376 !important"},attrs:{href:"#"}},[t._v("Purchase And Shipping Guidelines")])]),a("b-form",{attrs:{enctype:"multipart/form-data"},on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"2",label:"Website Name","label-for":"website"}},[a("b-form-select",{attrs:{options:t.options,required:""},model:{value:t.data.website,callback:function(e){t.$set(t.data,"website",e)},expression:"data.website"}})],1),a("b-form-group",{attrs:{"label-cols":"4","label-cols-sm":"2",label:"Product image","label-for":"image"}},[a("b-form-file",{ref:"file",attrs:{id:"image",accept:"image/jpeg, image/png, image/gif"},on:{change:t.onSelect},model:{value:t.data.image,callback:function(e){t.$set(t.data,"image",e)},expression:"data.image"}})],1),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"2",label:"Product Link","label-for":"link"}},[a("b-form-input",{attrs:{id:"link",placeholder:"Enter the product link",required:""},model:{value:t.data.productLink,callback:function(e){t.$set(t.data,"productLink",e)},expression:"data.productLink"}})],1),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"2",label:"Unit Price","label-for":"unitprice"}},[a("b-form-input",{attrs:{id:"unitprice",placeholder:"Enter unit price",required:""},model:{value:t.data.unitPrice,callback:function(e){t.$set(t.data,"unitPrice",e)},expression:"data.unitPrice"}})],1),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"2",label:"Quantity","label-for":"quantity"}},[a("b-form-input",{attrs:{id:"quantity",placeholder:"Enter quantity",required:""},model:{value:t.data.qty,callback:function(e){t.$set(t.data,"qty",e)},expression:"data.qty"}})],1),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"2",label:"Product Option","label-for":"option"}},[a("b-form-input",{attrs:{id:"options",placeholder:"Enter Product option eg: Color, Size"},model:{value:t.data.productOption,callback:function(e){t.$set(t.data,"productOption",e)},expression:"data.productOption"}})],1),a("b-form-group",{attrs:{"label-cols":"4","label-cols-lg":"2",label:"Seller Phone","label-for":"seller"}},[a("b-form-input",{attrs:{id:"seller",placeholder:"Enter seller phone"},model:{value:t.data.sellerphone,callback:function(e){t.$set(t.data,"sellerphone",e)},expression:"data.sellerphone"}})],1),t.log.loading?a("b-button",{staticStyle:{width:"100px"},attrs:{disabled:"",type:"submit",variant:"primary"}},[a("b-spinner",{attrs:{small:""}}),a("b-icon",{attrs:{icon:"plus-circle-fill"}}),t._v(" Add\n            ")],1):a("b-button",{staticStyle:{width:"100px"},attrs:{type:"submit",variant:"primary"}},[a("b-icon",{attrs:{icon:"plus-circle-fill"}}),t._v(" Add\n            ")],1)],1)],1)],1)],1),a("hr",{staticClass:"my-5"}),t.purchaseorder.length>0?a("b-row",[a("b-col",[a("b-card",{staticClass:"overflow-hidden mb-3 p-3",attrs:{title:"Waiting for shipping"}},[a("mdb-tbl",{attrs:{btn:"",responsive:"",striped:""}},[a("mdb-tbl-head",[a("tr",[a("th",[t._v("#")]),a("th",[t._v("Product Image")]),a("th",[t._v("Website Name")]),a("th",[t._v("Product Link")]),a("th",[t._v("Unit Price")]),a("th",[t._v("Quantity")]),a("th",[t._v("Product Option")]),a("th",[t._v("Seller Phone")]),a("th",[t._v("Fee")]),a("th",[t._v("Total Paid")])])]),t._l(t.purchaseorder,(function(e,r){return a("mdb-tbl-body",{key:r},t._l(e.data,(function(e,r){return a("tr",{key:r},[a("th",{attrs:{scope:"row"}},[t._v(t._s(r))]),a("td",[a("img",{staticStyle:{height:"50px",width:"50px"},attrs:{src:e.image,clas:"img_resize"}})]),a("td",[t._v(t._s(e.website))]),a("td",[t._v(t._s(e.productLink))]),a("td",[t._v(t._s(t._f("toCurrency")(e.unitPrice)))]),a("td",[t._v(t._s(e.qty))]),a("td",[t._v(t._s(e.productOption))]),a("td",[t._v(t._s(e.sellerphone))]),a("td",[t._v(t._s(e.fee)+"%")]),a("td",[t._v(t._s(t._f("toCurrency")(e.total)))])])})),0)}))],2)],1)],1)],1):a("b-row",[a("b-col",[a("b-card",{staticClass:"p-3",attrs:{"no-body":""}},[a("p",[t._v("you have nothing to ship fill the form to get started")])])],1)],1)],1),a("b-modal",{ref:"comfirmModal",staticStyle:{padding:"0"},attrs:{id:"comfirmModal",title:"Comfirm Payment",size:"xl"},scopedSlots:t._u([{key:"modal-footer",fn:function(e){var r=e.ok;return[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){r(t.makePayment(t.percentage(t.data.unitPrice*t.data.qty,t.fee)))}}},[t._v("\n        Comfirm\n      ")])]}}])},[a("mdb-tbl",{attrs:{btn:"",responsive:"",striped:""}},[a("mdb-tbl-head",[a("tr",[a("th",[t._v("#")]),a("th",[t._v("Product Image")]),a("th",[t._v("Website Name")]),a("th",[t._v("Product Link")]),a("th",[t._v("Unit Price")]),a("th",[t._v("Quantity")]),a("th",[t._v("Product Option")]),a("th",[t._v("Seller Phone")]),a("th",[t._v("Fee")]),a("th",[t._v("Total")])])]),a("mdb-tbl-body",[a("tr",[a("th",{attrs:{scope:"row"}},[t._v("1")]),a("td",[a("img",{staticStyle:{height:"50px",width:"50px"},attrs:{src:t.data.image,clas:"img_resize"}})]),a("td",[t._v(t._s(t.data.website))]),a("td",[t._v(t._s(t.data.productLink))]),a("td",[t._v(t._s(t._f("toCurrency")(t.data.unitPrice)))]),a("td",[t._v(t._s(t.data.qty))]),a("td",[t._v(t._s(t.data.productOption))]),a("td",[t._v(t._s(t.data.sellerphone))]),a("td",[t._v(t._s(t.fee)+"%")]),a("td",[t._v(t._s(t._f("toCurrency")(t.percentage(t.data.unitPrice*t.data.qty,t.fee))))])])])],1)],1),a("b-modal",{ref:"paymentModal",staticStyle:{padding:"0"},attrs:{id:"modal-prevent-closing","hide-header":"","hide-footer":"","no-stacking":"","ok-disabled":"",size:"md"}},[a("object",{staticStyle:{width:"100%",height:"500px"},attrs:{type:"text/html",data:t.authorization_url}})])],1)},n=[],i=(a("8e6e"),a("ac6a"),a("456d"),a("96cf"),a("3b8d")),s=(a("6762"),a("bd86")),o=a("91c9"),l=a("5651"),c=a("6fa1"),u=a("2f62"),d=a("bc3a"),p=a.n(d);function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){Object(s["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var f={name:"onlypurchesed",props:["id"],components:{mdbTbl:o["mdbTbl"],mdbTblHead:o["mdbTblHead"],mdbTblBody:o["mdbTblBody"],Breadcrumb:l["a"],Footer:c["a"]},data:function(){return{baseURL:"http://ec2-34-202-157-59.compute-1.amazonaws.com:5000",fileName:"",fee:null,authorization_url:null,reference:null,checkTransaction:null,currency:"",data:{useremail:"",website:null,image:null,productLink:"",unitPrice:"",qty:"",productOption:null,sellerphone:"",total:null,fee:null},mainProps:{center:!0,fluidGrow:!0,blank:!0,blankColor:"#eee",width:600,height:400,class:""},items:[{text:"Dashboard",href:"/user/"+this.id+"/"},{text:"Domestic Order",href:"domestic"},{text:"Only Purchase Order",href:"onlypurchesed"},{text:"Only Shipping Order",href:"onlyshipping"},{text:"Purchase And Shipping",href:"purchaseshipping",active:!0}],options:[{value:null,text:"select product website ..."}]}},created:function(){var t=this;this.$store.watch((function(e){return console.log(e),t.$store.state.transaction}),(function(e,a){console.log(a),"success"===e?(t.stopTransactionCheck(),!0===t.$store.state.log.isUserActive?t.updateUserData():t.loginNewUser(),t.makeToast("success","Transaction was success",!0),t.$refs["paymentModal"].hide()):"failed"===e?(t.stopTransactionCheck(),t.makeToast("danger","Transaction Failed, Please try again",!0),t.$refs["paymentModal"].hide(),setTimeout((function(){location.reload()}),3e3)):"Insufficient Funds"===e?(t.stopTransactionCheck(),t.makeToast("warning","Insufficient Funds, Please try again",!0),t.$refs["paymentModal"].hide(),setTimeout((function(){location.reload()}),3e3)):"warning"===e&&(t.makeToast("warning",t.log.message,!0),t.$store.commit("RESET"))})),"NGN"!=this.currencyType.currency&&"USD"!=this.currencyType.currency||(this.currency=this.currencyType.currency),this.fee=this.settings.commission.procurementfee,this.options=this.settings.productwebsites,this.data.useremail=this.user.email},computed:h({},Object(u["d"])(["log","user","purchaseorder","settings","currencyType"])),methods:{percentage:function(t,e){var a=t/100*e;return a+t},onSelect:function(t){var e=["image/jpeg","image/jpg","image/png"],a=t.target.files[0];e.includes(a.type)?a.size>1e6?this.makeToast("danger","too large, Maximum file size should be is 1MB",!0):(this.data.image=a,this.makeToast("success","image uploaded!",!0)):this.makeToast("danger","only images are allowed",!0)},onSubmit:function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e=new FormData,e.append("file",this.data.image),t.prev=2,t.next=5,p.a.post("".concat(this.baseURL,"/api/upload"),e);case 5:a=t.sent,this.fileName=a.data.file.filename,this.data.image="".concat(this.baseURL,"/").concat(a.data.file.path),this.$refs["comfirmModal"].show(),t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](2),this.$store.commit("logServerErr",t.t0.response.data.message);case 14:case"end":return t.stop()}}),t,this,[[2,11]])})));function e(){return t.apply(this,arguments)}return e}(),updateUserData:function(){var t=this;this.data.total=this.percentage(this.data.unitPrice*this.data.qty,this.fee),this.data.fee=this.fee,this.$store.dispatch("addPurchaseOrder",this.data).then((function(e){t.$store.commit("SET_PURCHASE_ORDER",e),t.$store.commit("SAVED","added successfully"),t.data={useremail:"",website:null,image:null,productLink:"",unitPrice:"",qty:"",productOption:null,sellerphone:"",total:null,fee:null}})).then((function(){setTimeout((function(){t.$store.commit("RESET")}),5e3)})).catch((function(e){return t.$store.commit("logServerErr",e.response.data.message)}))},makePayment:function(t){var e=this,a={email:this.data.useremail},r={total:t,user:a,currency:this.currency};this.$store.dispatch("initTransaction",r).then((function(t){e.authorization_url=t.data.authorization_url,e.reference=t.data.reference})).catch((function(t){return e.$store.commit("logServerErr",t.response.data.message)})).then((function(){return e.$refs["paymentModal"].show()})).then((function(){var t={reference:e.reference};e.checkTransaction=setInterval((function(){e.$store.dispatch("verifyPayment",t).then((function(t){"status"===t.data.status?(console.log("success"),e.stopTransactionCheck()):console.log("not verifed!")}))}),5e3)})).catch((function(t){return e.$store.commit("logServerErr",t.response.data.message)}))},stopTransactionCheck:function(){clearInterval(this.checkTransaction)},makeToast:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0,a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.toastCount++,this.$bvToast.toast(e,{title:"Transaction Status",variant:t,solid:!0,autoHideDelay:5e3,appendToast:a})}}},b=f,g=a("2877"),v=Object(g["a"])(b,r,n,!1,null,null,null);e["default"]=v.exports},"43e3":function(t,e,a){"use strict";var r=a("bf1e"),n=a.n(r);n.a},5651:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-breadcrumb",{attrs:{items:t.items}})},n=[],i={props:["id","items"],data:function(){return{}}},s=i,o=(a("43e3"),a("2877")),l=Object(o["a"])(s,r,n,!1,null,null,null);e["a"]=l.exports},6762:function(t,e,a){"use strict";var r=a("5ca1"),n=a("c366")(!0);r(r.P,"Array",{includes:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")("includes")},"6fa1":function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("footer",{staticClass:"sticky-footer"},[a("div",{staticClass:"container"},[a("div",{staticClass:"text-center"},[a("small",[t._v("Copyright © Marpe Online Procument "+t._s(t.data))])])])])])},n=[],i={name:"referral",data:function(){return{data:(new Date).toDateString()}}},s=i,o=a("2877"),l=Object(o["a"])(s,r,n,!1,null,null,null);e["a"]=l.exports},bf1e:function(t,e,a){}}]);
//# sourceMappingURL=chunk-db4fb8a0.9ae23ea6.js.map